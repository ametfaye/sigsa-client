<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" template="template.pgca.xhtml">

	<ui:define name="title">Magasisier - PGCA - Plateforme de gestion Agricole</ui:define>



	<ui:define name="section">



		<p:spacer width="3%"></p:spacer>



		<div class="container-fluid fullbg">

			<div class="col-md-12">
								<p:messages id="msg" showDetail="true" />
			


				<h:form id="superFormgg"
					rendered="#{param.idBlocToShow eq '1' or param.idBlocToShow eq null}">


					<h1
						style="text-align: center; margin-top: 20px; margin-bottom: 30px; text-transform: uppercase; font-family: 'PTSans Bold'; font-size: 15px; color: #253123; letter-spacing: 2px; text-align: center">
						Gestion des transporteurs</h1>


<!-- 					 Filtre des ordres -->
<!-- 					<div class="col-md-8 pull-right "> -->

<!-- 						<div class="col-md-3" style="margin-top: -10px;"> -->
<!-- 							<div class="form-inline"> -->
<!-- 								<p class="form-control-static">Transporteur</p> -->
<!-- 								<div class="input-group-lg"> -->
<!-- 									<h:selectOneMenu value="#{agentSaisieMB.filterIdProgramme}" -->
<!-- 										styleClass="form-control input-sm "> -->
<!-- 										<f:selectItem itemLabel="Tous les programmes" itemValue="0" /> -->

<!-- 										<f:selectItems -->
<!-- 											value="#{referentielMB.loadtransporteur()}" -->
<!-- 											var="CollaborateurDTO" itemValue="#{CollaborateurDTO.clef}" -->
<!-- 											itemLabel="#{CollaborateurDTO.valeur}" /> -->

<!-- 									</h:selectOneMenu> -->
<!-- 								</div> -->
<!-- 							</div> -->
<!-- 						</div> -->

<!-- 						<div class="col-md-3" style="margin-top: -10px;"> -->
<!-- 							<div class="form-inline"> -->
<!-- 								<p class="form-control-static">Chauffeur</p> -->
<!-- 								<div class="input-group-lg"> -->
<!-- 									<h:selectOneMenu value="#{agentSaisieMB.filtredCat}" -->
<!-- 										styleClass="form-control input-sm"> -->
<!-- 										<f:selectItem itemLabel="Tous" itemValue="-1" /> -->

<!-- 										<f:selectItems value="#{referentielMB.loadAllChauffeur()}" -->
<!-- 											var="CollaborateurDTO" itemValue="#{CollaborateurDTO.id}" -->
<!-- 											itemLabel="#{CollaborateurDTO.prenom} #{CollaborateurDTO.nom}" /> -->


<!-- 									</h:selectOneMenu> -->
<!-- 								</div> -->
<!-- 							</div> -->
<!-- 						</div> -->



<!-- 						<div class="col-md-3" style="margin-top: 30px;"> -->
<!-- 							<div class="form-inlined"> -->
<!-- 								<h:commandButton value="Recherche" -->
<!-- 										action="#{agentSaisieMB.filterTransporteur()}" name="Détails" -->
<!-- 										class="enregistrer fa fa-search btn btn-default  btn-default " -->
<!-- 										style="margin-left : 10px" /> -->
<!-- 								<br /> -->
<!-- 							</div> -->
<!-- 						</div> -->



<!-- 					</div> -->
					<br />
					<hr /> <br />

					<p:dataTable var="ProduitDTO"  
						value="#{agentSaisieMB.listTransporteur}" reflow="true" row="5"
						rowKey="#{ProduitDTO.idCamion}" widgetVar="carsTable" filteredValue="#{agentSaisieMB.listTransporteurfiltred}"  
						style="width: 90%; margin-left:5%; font-size:15px ; "
						emptyMessage="Aucun bon de livraison à valider !!"
						paginator="true" paginatorPosition="bottom" rows="5"
						
						paginatorTemplate="{PreviousPageLink} {NextPageLink} "
						selectionMode="single" >
						
						
							<f:facet name="header">
						<p:outputPanel>
							<h:outputText value="Critères de recherche "
								style="color : #002839" />
							<i class="fa fa-search" aria-hidden="true" style="color: #80c347" />

							<p:inputText id="globalFilter" onkeyup="PF('carsTable').filter()"
								style="width:350px; margin-bottom  : 40px; margin-left : 20px; "
								placeholder="Entrez un critère " />
						</p:outputPanel>
					</f:facet>
						

						
						<p:column headerText="Camion" filterBy="#{ProduitDTO.imatCamion}"
							sortBy="#{ProduitDTO.imatCamion}"
							filterMatchMode="startsWith">  
								         #{entiteJMB.StringCutter(ProduitDTO.imatCamion,40)} 
								        </p:column>
						<p:column headerText="Chauffeur " filterBy="#{ProduitDTO.nomChauffeur}"
							sortBy="#{ProduitDTO.nomChauffeur}">  
												#{entiteJMB.StringCutter(ProduitDTO.nomChauffeur,20)}
								        </p:column>
						<p:column headerText="Tel chauffeur"  filterBy="#{ProduitDTO.contactChauffeur}"
							sortBy="#{ProduitDTO.contactChauffeur}"
							filterMatchMode="startsWith">  
								     #{entiteJMB.StringCutter(ProduitDTO.contactChauffeur,50)} 
					 	 </p:column>
						
						
					
						<p:column headerText="Transporteur" filterBy="#{ProduitDTO.nomTransporteur}"
							sortBy="#{ProduitDTO.nomTransporteur}"
							filterMatchMode="startsWith">  
								        #{entiteJMB.StringCutter(ProduitDTO.nomTransporteur, 15)} 
						</p:column>
						
						<p:column headerText="Tel Transporteur" filterBy="#{ProduitDTO.contactTransporteur}"
							sortBy="#{ProduitDTO.contactTransporteur}"
							filterMatchMode="startsWith"> 
								       #{entiteJMB.StringCutter(ProduitDTO.contactTransporteur,20)} 
		                 </p:column>

					
					</p:dataTable>

						<br/>

<!-- 					<h:commandButton styleClass=" btn btn-success pull-right" -->
<!-- 						style="width : 220px ; margin-right : 80px" -->
<!-- 						action="#" value="Ajouter" -->
<!-- 						name="suivants" /> -->
					
<!-- 						<h:commandButton styleClass=" btn btn-success pull-right" -->
<!-- 						style="width : 200px ; margin-right : 80px" -->
<!-- 						action="#" value="Voir Nombre de chargement" -->
<!-- 						name="suivants" /> -->
						
						
						
						
					<br />
					<br />

				</h:form>





				<!-- Details BL idBloacktoshow 2 -->

				<h:form prependId="false" rendered="#{param.idBlocToShow eq '2'}">


					<div style="margin-left: 5%; margin-right: 5%">

						<h1 class="titleCenter" style="text-align: center">Détails du
							bon de Livraison #{agentSaisieMB.selectedBLDTO.libelle}</h1>
						<br />
						<hr />
						<div class="row">
							<div class="col-md-4">

								<div class="form-group">
									<label for="inputEmail3" class="col-sm-6 control-label">Expediteur
									</label>
									<div class="col-sm-6">
										<label for="inputEmail3" class="control-label ">#{agentSaisieMB.selectedBLDTO.auteurBl}</label>
									</div>
								</div>
								<br />

								<div class="form-group">
									<label for="inputEmail3" class="col-sm-6 control-label ">Contact</label>
									<div class="col-sm-6">
										<label for="inputEmail3" class="control-label ">#{agentSaisieMB.selectedBLDTO.contactAuteurBl}</label>
									</div>
								</div>


							</div>

							<div class="col-md-4">

								<div class="form-group">
									<label for="inputEmail3" class="col-sm-6 control-label">Statut
									</label>

									<div class="col-sm-6">
										<label for="inputEmail3" class="control-label "> <span
											class="label label-warning"> <i
												class=" fa fa-spinner " aria-hidden="true"></i> En attente
										</span>
										</label>
									</div>
								</div>
								<br />

								<div class="form-group">
									<label for="inputEmail3" class="col-sm-6 control-label">Tel
										Chauffeur</label>
									<div class="col-sm-6">
										<label for="inputEmail3" class="control-label ">#{agentSaisieMB.selectedBLDTO.contactChauffeur}</label>
									</div>
								</div>

							</div>


							<div class="col-md-4">

								<div class="form-group">
									<label for="inputEmail3" class="col-sm-6 control-label">
										Poids Total </label>
									<div class="col-sm-6">
										<label for="inputEmail3" class="control-label ">
											#{agentSaisieMB.selectedBLDTO.poids} </label>
									</div>
								</div>
								<br />

								<div class="form-group">
									<label for="inputEmail3" class="col-sm-6 control-label ">Valeur</label>
									<div class="col-sm-6">
										<label for="inputEmail3" class="control-label ">#{referentielMB.utils.formatFloatToCFA(agentSaisieMB.selectedBLDTO.prixtotal)}
										</label>
									</div>
								</div>


							</div>

						</div>
						<br />
					</div>



					<br />
					<br />
					<p:dataTable var="ProduitDTO"
						value="#{agentSaisieMB.selectedBLDTO.listProduitsOfBL}"
						reflow="true" row="5" rowKey="#{ProduitDTO.id}"
						style="width: 90%; margin-left:5%; font-size:15px ; "
						emptyMessage="Aucun produit à valider !!" paginator="true"
						paginatorPosition="bottom" rows="5"
						paginatorTemplate="{PreviousPageLink} {NextPageLink} ">


						<p:column headerText="Campagne" style="width : 25%">  
								         #{entiteJMB.StringCutter(ProduitDTO.libelleCampagne,30)} 
								        </p:column>
						<p:column headerText="Programme">  
								         #{entiteJMB.StringCutter(ProduitDTO.libelleProgramme,20)} 
								        </p:column>
						<p:column headerText="Désignation">  
								         #{entiteJMB.StringCutter(ProduitDTO.libelle,20)} 
								        </p:column>
						<p:column headerText="Quantité" style="width : 15%">  
								         #{entiteJMB.StringCutter(ProduitDTO.quantite,20)}  (T)
								        </p:column>

						<p:column headerText="Prix Unitaire" style="width : 15%">  
												#{referentielMB.utils.formatFloatToCFA(ProduitDTO.prixUnitaire)}
								        </p:column>



						<!-- 							<p:ajax event="rowSelect" update="DetailsSelectedBL" listener="#{agentSaisieMB.getDetailsOfSelectedBL}"> </p:ajax> -->

					</p:dataTable>

					<br />

					<h:commandButton styleClass=" btn btn-success pull-right"
						style="width : 230px ; margin-right : 80px" action="#"
						value=" retour" name="suivants" />

					<br />
					<br />
					<br />
					<br />


				</h:form>

				<!-- Fin Details BL idBloacktoshow 2 -->



			</div>
		</div>



	</ui:define>

</ui:composition>
