<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" template="template.pgca.xhtml">

	<ui:define name="title">PGCA - Plateforme de gestion Agricole</ui:define>


	<ui:define name="section">
<!-- 			<div id="container222" style="min-width: 310px; height: 400px; margin: 0 auto"></div> -->

		<br />
		<br />
		<br />
		<br />
		<br />
		<p:spacer width="3%"></p:spacer>


		<h:panelGroup  rendered="#{connexionMB.connectedUserProfilIsDRDR}">
		
		
		<div class="container-fluid">
		
		<div class="col-md-1"/>
			<div class="col-md-10">
        <div class="col-md-3 col-sm-6 col-xs-12">
        
        
          <div class="info-box bg-aqua">
            <span class="info-box-icon"><i class="fa fa-bookmark-o"></i></span>

            <div class="info-box-content">
              <span class="info-box-text ">Subventions intrant</span>
             	 <span class="col-md-12" >
                
                <span  class="pull-left"><i class="fa fa-clock-o iconDashboard" aria-hidden="true" style="margin-right : 10PX"></i>En attente</span>	
                
                <span class="pull-right">2</span>	
                
                </span>
                
                
                <span class="col-md-12" >
                
                <span  class="pull-left"><i class="fa fa-check iconDashboard" aria-hidden="true" style="margin-left : -2PX"></i>Traitées</span>	
                
                <span class="pull-right">2</span>	
                
                </span>
                
                
                <span class="col-md-12" >
                
                <span  class="pull-left"><i class="fa fa-close iconDashboard" aria-hidden="true" style="margin-right : 10PX"></i>Refusés</span>	
                
                <span class="pull-right">2</span>	
                
                </span>
                
              <div class="progress">
                <div class="progress-bar" style="width: 70%"></div>
              </div>
                
            </div>
            <!-- /.info-box-content -->
          </div>
          <!-- /.info-box -->
        </div>
        <!-- /.col -->
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="info-box ">
            <span class="info-box-icon"><i class="fa fa-university"></i></span>

            <div class="info-box-content">
              <span class="info-box-text">Activitès</span>
              <span class="info-box-number" style="color : #b55757">	#{referentielMB.utils.formatFloatToCFA( tresoMB.callServiceTotalDepotBanque() )}  </span>

              <div class="progress">
                <div class="progress-bar" style="width: 70%"></div>
              </div>
                  <span class="progress-description">
                    32 collectes
                  </span>
            </div>
            
            
            <!-- /.info-box-content -->
          </div>
          <!-- /.info-box -->
        </div>
        
        
        
              <!-- /.col -->
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="info-box bg-#b55757">
            <span class="info-box-icon"><i class="fa fa-comments-o"></i></span>

            <div class="info-box-content">
              <span class="info-box-text">Subventions</span>
              <span class="info-box-number" style="color : #b55757"> #{referentielMB.utils.formatFloatToCFA(managerManagedBean.totalSubvention)}</span>

              <div class="progress">
                <div class="progress-bar" style="width: 70%"></div>
              </div>
                  <span class="progress-description">
                   32 ventes
                  </span>
            </div>
            <!-- /.info-box-content -->
          </div>
          <!-- /.info-box -->
        </div>
        <!-- /.col -->
        
        
        
        <!-- /.col -->
        <div class="col-md-3 col-sm-6 col-xs-12">
          <div class="info-box bg-yellow">
            <span class="info-box-icon"><i class="fa fa-calendar"></i></span>

            <div class="info-box-content">
               <span class="info-box-text ">Ordre de livraions</span>
             	 <span class="col-md-12" >
                
                <span  class="pull-left"><i class="fa fa-clock-o iconDashboard" aria-hidden="true" style="margin-right : 10PX"></i>En attente</span>	
                
                <span class="pull-right">22</span>	
                
                </span>
                
                
                <span class="col-md-12" >
                
                <span  class="pull-left"><i class="fa fa-check iconDashboard" aria-hidden="true" style="margin-left : -2PX"></i>Traitées</span>	
                
                <span class="pull-right">9</span>	
                
                </span>
                
                
                <span class="col-md-12" >
                
                <span  class="pull-left"><i class="fa fa-close iconDashboard" aria-hidden="true" style="margin-right : 10PX"></i>Refusés</span>	
                
                <span class="pull-right">12</span>	
                
                </span>
                
              <div class="progress">
                <div class="progress-bar" style="width: 70%"></div>
              </div>
            </div>
            <!-- /.info-box-content -->
          </div>
          <!-- /.info-box -->
        </div>
  
      </div>
    		<div class="col-md-1"/>
      
      
      

			
			<div class="col-md-9">	
				<h:form  id="cc" class="col-md-12" >

				

				<p:messages id="messages" showDetail="false"
					style="width : 60% ; margin-left : 20%" />
				<br />
				<br />
				<br />

				<div class="col-xs-12">

				


				



			



					<h:panelGroup id="msgg2">
					
		
		<script type="text/javascript">
//$("#cumulZoneData").text().trim()
	var quota = 	parseInt($("#quoaZoneData").text().trim());
	var cumul = 	parseInt($("#cumulZoneData").text().trim());
	var reliquat = 	parseInt($("#reliquatZoneData").text().trim());
	
Highcharts.chart('containerfaye', {
	

    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: 0,
        plotShadow: false
    },
    title: {
        text: 'Répartition',
        align: 'center',
        verticalAlign: 'middle',
        y: 40
    },
    tooltip: {
        pointFormat: '{series.name}:  {point.percentage:.1f}% '
    },
    exporting: {
        enabled: false
},
credits: {
    enabled: false
},
    plotOptions: {
        pie: {
            dataLabels: {
                enabled: true,
                distance: -50,
                style: {
                    fontWeight: 'bold',
                    color: 'white'
                }
            },
            
            
            startAngle: -90,
            endAngle: 90,
            center: ['50%', '75%']
        }
    },
    series: [{
        type: 'pie',
        name: 'Taux de couverture',
        innerSize: '50%',
        options3d: {
            enabled: true,
            alpha: 45,
            beta: 0
        },
        data: [
           
            ['Cumul',     cumul ],
            ['Reliquat', reliquat],
         
            {
                name: 'Proprietary or Undetectable',
                y: 0.2,
                dataLabels: {
                    enabled: false
                }
            }
        ]
    }]
});


		</script>
						
					</h:panelGroup>


					
					<h:panelGroup id="Suivi">
						

						<p:messages id="msg" showDetail="true" />
						<p class="titrePage" style="font-size: 20px">
							#{msg['manager.stock.list']} du point de vente</p>



						<p:dataTable var="utilisateurProviver" 
						id="utilisateurProviver" widgetVar="carsTable" 
						value="#{agentSaisieMB.loadMiseEnPlace()}"
						rowKey="#{utilisateurProviver.idMiseEnPlace}" reflow="true"
						 style="width: 90%; margin-left:5%; font-size:15px ; "
						paginatorTemplate=" {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} "
						rowsPerPageTemplate="5,10,15"
						
						emptyMessage="Aucune mise a disposition pour cette zone !!!"
						paginator="true" paginatorPosition="bottom" rows="11"
						filteredValue="#{agentSaisieMB.filtredlistQuotaMiseEnplace}"
						>
						
						
							<f:facet name="header">
							<p:outputPanel>
								<h:outputText value="Critères de recherche "
									style="color : #002839" />
								<i class="fa fa-search" aria-hidden="true"
									style="color: #80c347" />

								<p:inputText id="globalFilter"
									onkeyup="PF('carsTable').filter()"
									style="width:350px; margin-bottom  : 40px; margin-left : 20px; "
									placeholder="Entrez un critère " />
							</p:outputPanel>
						</f:facet>
	
	
						<p:column headerText="Département" 
						filterBy="#{utilisateurProviver.departementPointdeVente}" sortBy="#{utilisateurProviver.departementPointdeVente}"
							filterMatchMode="contains">  
								         #{entiteJMB.StringCutter(utilisateurProviver.departementPointdeVente,90)} 
								        </p:column>
								        
						
						<p:column headerText="Point de Vente" 
						filterBy="#{utilisateurProviver.nomPointDeVente}" sortBy="#{utilisateurProviver.nomPointDeVente}"
							filterMatchMode="contains">  
								         #{entiteJMB.StringCutter(utilisateurProviver.nomPointDeVente,90)} 
								        </p:column>

						<!-- 								<p:column headerText="Responsable">   -->
						<!-- 								         #{entiteJMB.StringCutter(utilisateurProviver.nomGerant,20)}  -->
						<!-- 								        </p:column> -->


						<p:column headerText="Variété / Formule"
						
						filterBy="#{utilisateurProviver.libelleIntrantAMettreEnplace}" sortBy="#{utilisateurProviver.libelleIntrantAMettreEnplace}"
							filterMatchMode="contains">   
								         #{entiteJMB.StringCutter(utilisateurProviver.libelleIntrantAMettreEnplace,20)} 
								        </p:column>

						<p:column headerText="Quota" sortBy="#{utilisateurProviver.quotaIntrantAMettreEnplace}">  
								         #{utilisateurProviver.quotaIntrantAMettreEnplace} 
								         
								        
								        </p:column>


						<p:column headerText="Cumul" id="selectedCumul" sortBy="#{utilisateurProviver.cumulIntrantAMettreEnplace}">  
								         #{utilisateurProviver.cumulIntrantAMettreEnplace} 
								        </p:column>



						<p:column headerText="Reliquat" filterBy="#{utilisateurProviver.reliquatIntrantAMettreEnplace}" 
						sortBy="#{utilisateurProviver.reliquatIntrantAMettreEnplace}">  
								         #{utilisateurProviver.reliquatIntrantAMettreEnplace} 
								         
								         
								        </p:column>
<!-- 						<p:ajax event="rowSelect" update="MEPForm" -->
<!-- 							listener="#{agentSaisieMB.updatePopUpData()}" /> -->


					</p:dataTable>


						<div class=" pull-right" style="margin-right: 55px">
							<br />

<!-- 							<h:commandButton value="Détails" -->
<!-- 								action="#{managerManagedBean.getDetailsIntrant}" name="Détails" -->
<!-- 								class="enregistrer a fa-info btn btn-success pull-right" -->
<!-- 								style="margin-right : 15px; width : 140px; margin-right : 30px" /> -->
						
						
					<h:commandLink
								action="#{managerManagedBean.getDetailsIntrant}" >
								<img  title="Voir les détails de l'intrant sélectionné"
							style="margin-right : 40px ! important; margin-top : 10px;"
							height="60px" src="assets/images/inventaire.png"
							alt="Logo PGCA"/>
							</h:commandLink>
							
				
							
						</div>

						<br />
						<br />

				


						
					<br />


					<!--  Liste des points des ventes trouvés dans la commune -->


					</h:panelGroup>

				</div>


			</h:form>
						
						
			</div>
			
			
			<div class="col-md-3">	
			<br/><br/><br/><br/><br/><br/>	
				<p style="text-align :center ; text-align: center;
    font-size: 40px ! important;
    text-overflow: ellipsis ! important;
    font-family: 'PTSans Bold' ! important;
    margin-bottom: 6px;
    color: #9ad667;"> DRDR KOLDA </p>	
				<div id="mapdiv2"	style="width: 100%; background-color: WHITE; height: 500px;" />
		
		
			
			</div>
			
		</div>
	
	
		<script>
		var map;
		var engraisMode;
		AmCharts.ready(function() {
			map = new AmCharts.AmMap();
			// FROM MANAGED BEAN List des PointdeVENTEDTOs
			//var lispPVjsonString = $("#mapAllPointDeVenteInJSON").val();
			var lispPVjsonString  = '[{"color":"#002839","idRegion":7,"id":"SN-KE","title":"PVKolda"}]';
			var lispPVJsonObject = JSON.parse(lispPVjsonString);
			/**  CREATION PROVIDER ***/
			var dataProvider = {
				mapVar : AmCharts.maps.senegalLow,
				getAreasFromMap : false,
				areas : lispPVJsonObject,
			/*images : [
			           {
			             "type": "circle",
			             "label": "Circle Test",
			             "top": 200,
			             "left": 200
			           }
			         ]*/

			};

			map.dataProvider = dataProvider;
			map.areasSettings = {
				autoZoom : true,
				selectedColor : "#80c347",
				rollOverColor : "#80c347",
				animationDuration : 130,
				adjustAnimationSpeed : true,
				descriptionWindowBottom : 30000,
				balloonText : '[[title]]',

			};

			map.allLabels = {
				"text" : "Free label",
				"bold" : true,
				"x" : 20,
				"y" : 20
			};
			map.balloon = {
				adjustBorderColor : true,
				color : "#000000",
				cornerRadius : 15,
				fillColor : "#FFFFFF",
				verticalPadding : 15
			}

			//map.smallMap = new AmCharts.SmallMap();
			map.write("mapdiv2");
			map.addListener("clickMapObject", function(event) {
				// 'Clicked ID: ' + event.mapObject.id + ' (' + event.mapObject.title + ')';
				$("#area input[id=selecteIDdAreaOnMap]").val(
						event.mapObject.idRegion);

				var nika = $("#mapAllProduitofPointDeVenteInJSON").val();
				var mef = JSON.stringify(nika);
				$("#area input").click();
			});
		});

		// Pastille Liste mise des intrant du stock
	</script>
	
	
		
		<script type="text/javascript">

Highcharts.chart('container222', {
    chart: {
        type: 'line'
    },
    title: {
        text: 'Evolution mise en place'
    },
    subtitle: {
        text: 'Programme Contre saison 2017'
    },
    xAxis: {
        categories: ['Dakar', 'THies', 'Kaolack', 'Louga', 'Diourbel', 'Fatick', 'Kaffrine',  'Saint Louis', 'Matam', 'Kolda', 'Ziguinchor', 'Kédougou']
    },
    yAxis: {
        title: {
            text: 'Tonnage '
        }
    },
    plotOptions: {
        line: {
            dataLabels: {
                enabled: true
            },
            enableMouseTracking: false
        }
    },
    series: [{
        name: 'Reliquat',
        data: [7.0, 6.9, 1.5, 34.5, 18.4, 21.5, 25.2, 26.5, 23.3, 26.5, 23.3]
    }, {
        name: 'Cumul',
        data: [3.9, 4.2, 4.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 26.5, 23.3]
    }]
});






		</script>
		
		
		
			
						
		
		
		<script type="text/javascript">

Highcharts.chart('container222', {
    chart: {
        type: 'line'
    },
    title: {
        text: ' Suivi des mises en place par Zone'
    },
    subtitle: {
        text: 'Repartition par zone'
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },
    yAxis: {
        title: {
            text: 'Taux de Mise en place (°%)'
        }
    },
    plotOptions: {
        line: {
            dataLabels: {
                enabled: true
            },
            enableMouseTracking: false
        }
    },
    series: [{
        name: 'Mais',
        data: [7.0, 6.9, 1.5, 34.5, 18.4, 21.5, 25.2, 26.5, 23.3]
    }, {
        name: 'Riz Nerica 1',
        data: [3.9, 4.2, 4.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2]
    }]
});






		</script>
		
		
		
		</h:panelGroup>
		
		
<h:panelGroup rendered="#{connexionMB.connectedUserProfilIsDRDR == false}">
			<div class="container-fluid">
			<div class="col-md-12">

				
					<br />
					<p class="titrePage">Accès restreint</p>
						 <h1> Votre profil ne vous donne pas accès à cette ressource demandée</h1>
						 
						 <img
							src="assets/images/restrict.png"
							alt="Logo du Sénégal"/>
			  
		 
		 </div> 
		 </div>
		</h:panelGroup>
		
		
		<div class="row" />
		
		
		
		

	</ui:define>

</ui:composition>
