<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" template="template.pgca.xhtml"
	xmlns:c="http://java.sun.com/jstl/core">

	<ui:define name="title">PGCA Tableau de bord agent de saisie</ui:define>


	<ui:define name="section">

		<div class="container-fluid fullbg">

			<br /> <br /> <br />
			<p class="titrePage">Liste des magasins</p>
			<br />
			<h:form id="engraisList" rendered="#{param.idBlocToShow eq '1'}">

				<p:messages id="messages" showDetail="true"
					styleClass="pmessageStyle" />



				<p:dataTable id="ProfilID" var="pvDTO"
					value="#{managerManagedBean.loadAllPointDeVentes()}" reflow="true"
					rowKey="#{pvDTO.idPv}" selection="#{managerManagedBean.selectedPv}"
					selectionMode="single"
					emptyMessage="Ancun point de vente disponible" paginator="true"
					rows="20" cellSeparator="10"
					paginatorTemplate="{PreviousPageLink} {NextPageLink} "
					paginatorPosition="bottom"
					style="width: 90%; margin-left:5%; font-size:15px ; ">
					<!-- 					<p:column headerText="Libelle"> -->
					<!-- 				          #{profilMB.StringCutter(pvDTO.libelle, 40)}  -->
					<!-- 				        </p:column> -->
					<p:column headerText="Libellé">
				          #{profilMB.StringCutter(pvDTO.libelle, 40)} 
				        </p:column>
					<p:column headerText="Département">
				          #{profilMB.StringCutter(pvDTO.departement, 40)} 
				        </p:column>
					<p:column headerText="Commune">
				          #{profilMB.StringCutter(pvDTO.commune, 40)} 
				        </p:column>

					<p:column headerText="Gérant">
				          #{profilMB.StringCutter(pvDTO.gerant, 40)} 
				        </p:column>
					<p:column headerText="Contact Gérant">
				          #{profilMB.StringCutter(pvDTO.contactGerant, 40)} 
				        </p:column>
				        
				        <p:ajax event="rowSelect"
											listener="#{managerManagedBean.redirectSpecifiquePointdeVente()}"
											update="@form" />
											
				</p:dataTable>


				
				<br/> 
				
				<h:form style=" margin-right : 15px" id="engraisCreate222" >
			<div class="container-fluid">
			
				<div  class="row">
				
					<div  class="col-md-3">
						
					 </div>
					
					<div  class="col-md-3">
					 </div>
					
					<div  class="col-md-3">
					 </div>
						
				</div>
				
				
				<h4 class="titleLevel4">
					#{managerManagedBean.selectedPv.libelle} </h4>
			
				<hr />



				<div class="row">


					<div class="col-md-3" id="pointdeVenteChartStock"
						style="text-align: center; margin-top: -20px">

						<div id="ui-widget"
							style="margin-left: 10px; box-shadow: inset 0 3px 0 rgb(34, 160, 88), inset 0 3px 5px rgba(0, 0, 0, .25)">
							<h1 class="ui-value">
								<a href="#" style="color: #029441; font-size: 20px;"> <i
									class="fa fa-caret-up" aria-hidden="true" style="color: red"></i>
								#{referentielMB.utils.formatFloatToCFA(managerManagedBean.listeVentefSelectePVTotal)}
																</a>
							</h1>
							<span class="ui-label"> <a href="#"
								style="color: #029441; font-size: 17px;">VENTES </a></span>
						</div>
					</div>
					
					
						<div class="col-md-3" id="pointdeVenteChartStock"
						style="text-align: center; margin-top: -20px">

						<div id="ui-widget"
							style="margin-left: 10px; box-shadow: inset 0 3px 0 rgb(34, 160, 88), inset 0 3px 5px rgba(0, 0, 0, .25)">
							<h1 class="ui-value">
								<a href="#" style="color: #029441; font-size: 20px;"> <i
									class="fa fa-caret-up" aria-hidden="true" style="color: red"></i>
									#{referentielMB.utils.formatFloatToCFA(managerManagedBean.listeCreditDTOofSelectePVTotal)}

								</a>
							</h1>
							<span class="ui-label"> <a href="#"
								style="color: #029441; font-size: 17px;">CREDIT </a></span>
						</div>
					</div>
					
						<div class="col-md-3" id="pointdeVenteChartStock"
						style="text-align: center; margin-top: -20px">

						<div id="ui-widget"
							style="margin-left: 10px; box-shadow: inset 0 3px 0 rgb(34, 160, 88), inset 0 3px 5px rgba(0, 0, 0, .25)">
							<h1 class="ui-value">
								<a href="#" style="color: #029441; font-size: 20px;"> <i
									class="fa fa-caret-up" aria-hidden="true" style="color: red"></i>
									#{referentielMB.utils.formatFloatToCFA(managerManagedBean.listeversementBanqueofSelectePVTotal)}

								</a>
							</h1>
							<span class="ui-label"> <a href="#"
								style="color: #029441; font-size: 17px;">Versement </a></span>
						</div>
					</div>
					
						<div class="col-md-3" id="pointdeVenteChartStock"
						style="text-align: center; margin-top: -20px">

						<div id="ui-widget"
							style="margin-left: 10px; box-shadow: inset 0 3px 0 rgb(34, 160, 88), inset 0 3px 5px rgba(0, 0, 0, .25)">
							<h1 class="ui-value">
								<a href="#" style="color: #029441; font-size: 20px;"> <i
									class="fa fa-caret-up" aria-hidden="true" style="color: red"></i>
									0%

								</a>
							</h1>
							<span class="ui-label"> <a href="#"
								style="color: #029441; font-size: 17px;"> Mise en place </a></span>
						</div>
					</div>
					
				</div>
				
				
					<hr/>
					
				  <div class="row">
				  
				  	<h4 class="titrePage"
							style="color: #333333; font-size: 18px; fill: #333333; text-align : center">
							Intrants disponibles</h4>
						
						
						<p:dataTable var="pvDTO"
							value="#{managerManagedBean.listProduitslieeSelectedVente}"
							reflow="true" emptyMessage="Le stock du point de vente est vide"
							paginator="true" rows="6" cellSeparator="10"
							paginatorTemplate="{PreviousPageLink} {NextPageLink} "
							paginatorPosition="bottom"
							style="font-size:15px ; text-align :center ; width : 80%; margin-left: 10%">
							

									<p:column headerText="Programme">
				          				#{profilMB.StringCutter(pvDTO.libelleProgramme, 100)} 
				        			</p:column>
				        			
				        			<p:column headerText="Intrant">
				          				#{profilMB.StringCutter(pvDTO.libelle, 100)} 
				        			</p:column>
				        			
				        			<p:column headerText="Prix Unitaire">
				          				#{profilMB.StringCutter(pvDTO.prixUnitaire, 100)} 
				        			</p:column>
				        			
				        		

									<p:column headerText="Tonnage disponible"> 
				          				#{profilMB.StringCutter(pvDTO.quantite, 300)} T
				        			</p:column>

						</p:dataTable>  <br/>  <br/>
						
							<div id="buttons" class="">
								<a  href="managergestionDesPointsdeVente.xhtml?idBlocToShow=1"
									style="width: 150px; margin-top: -50px;; color: #006600; margin-right : 170px;"
									data-toggle="modal"
									class="fa fa-undo btn btn-default pull-right">
									Retour</a>
									
									
									
							</div>
							
							<div class="col-md-5"/>
								<div class="col-md-5">

							
							</div>
							
							
				  </div>
				
						

			</div>

		</h:form>
			</h:form>


			<h:form id="pvList" rendered="#{param.idBlocToShow eq '2'}">
				<div class="container-fluid">
					<div id="engraisCreate" class="form-horizontal">
						<p:messages id="messages" showDetail="true" />

						<p class="titrePage">Modification point de vente
							#{referentielMB.pointDeVente.libelle}</p>
						<br />
						<div class="col-xs-6">
							<div class="form-group">
								<label for="inputPassword3" class="col-sm-2 control-label">Libéllé</label>
								<div class="col-sm-10">
									<p:inputText value="#{referentielMB.pointDeVente.libelle}"
										styleClass="form-control" title="Le libelle est requis"
										requiredMessage="Le libelle est  requis" required="true" />
								</div>
							</div>


							<div class="form-group">
								<label for="inputEmail3" class="col-sm-2 control-label">Région</label>
								<div class="col-sm-10">
									<h:selectOneMenu value="#{referentielMB.pointDeVente.idRegion}"
										required="true"
										styleClass="form-control input-sm CustomSelect"
										requiredMessage="Le Profil est requis">
										<f:selectItem itemLabel="Selectionnez une region "
											itemValue="" />
										<f:selectItems value="#{referentielMB.regionDtos}"
											var="CollaborateurDTO" itemValue="#{CollaborateurDTO.clef}"
											itemLabel="#{CollaborateurDTO.valeur}" />

										<p:ajax event="change"
											listener="#{referentielMB.refreshDepartementByRegionId()}"
											update="deptList communList" />
									</h:selectOneMenu>
								</div>
							</div>



							<h:panelGroup id="communList">
								<div class="form-group">
									<label for="inputEmail3" class="col-sm-2 control-label">Commune</label>
									<div class="col-sm-10">
										<h:selectOneMenu
											value="#{referentielMB.pointDeVente.idCommune}"
											required="true"
											styleClass="form-control input-sm CustomSelect"
											requiredMessage="La commmune est requise">
											<f:selectItem itemLabel="Selectionnez une commune"
												itemValue="" />
											<f:selectItems value="#{referentielMB.communes}"
												var="CollaborateurDTO" itemValue="#{CollaborateurDTO.clef}"
												itemLabel="#{CollaborateurDTO.valeur}" />

										</h:selectOneMenu>
									</div>
								</div>
							</h:panelGroup>

						</div>


						<!--  right bloc -->
						<div class="col-xs-6">
							<div class="form-group">
								<label for="inputEmail3" class="col-sm-2 control-label">Gérant
								</label>
								<h:panelGroup class="col-sm-10">
									<h:selectOneMenu value="#{referentielMB.pointDeVente.idGerant}"
										id="profilListe" required="true"
										styleClass="form-control input-sm CustomSelect"
										requiredMessage="Le gerant est requis">
										<f:selectItem itemLabel="Selectionnez un gérant " itemValue="" />
										<f:selectItems
											value="#{referentielMB.loadCollaborateurDTOs()}"
											var="CollaborateurDTO"
											itemValue="#{CollaborateurDTO.idPersonne}"
											itemLabel="#{CollaborateurDTO.prenom} #{CollaborateurDTO.nom}" />

									</h:selectOneMenu>
								</h:panelGroup>
							</div>


							<h:panelGroup id="deptList">
								<div class="form-group">
									<label for="inputEmail3" class="col-sm-2 control-label">Département</label>

									<div class="col-sm-10">
										<h:selectOneMenu
											value="#{referentielMB.pointDeVente.idDepartement}"
											required="true"
											styleClass="form-control input-sm CustomSelect"
											requiredMessage="Le departement est requis">
											<f:selectItem itemLabel="Selectionnez un département"
												itemValue="" />
											<f:selectItems value="#{referentielMB.departements}"
												var="CollaborateurDTO" itemValue="#{CollaborateurDTO.clef}"
												itemLabel="#{CollaborateurDTO.valeur}" />
											<p:ajax event="change"
												listener="#{referentielMB.refreshCommunesByDepratementId()}"
												update="communList" />

										</h:selectOneMenu>
									</div>
								</div>
							</h:panelGroup>


							<div class="form-group">
								<label for="inputPassword3" class="col-sm-2 control-label">Adresse</label>
								<div class="col-sm-10">
									<p:inputText
										value="#{referentielMB.pointDeVente.libelleAdresse}"
										styleClass="form-control" title="L'adresse" required="false" />
								</div>
							</div>


						</div>
						<div id="buttons" class="pull-right">
							<h:commandButton styleClass="suivant btn btn-validatd pull-right"
								value="Créer" name="suivants" />


							<a type="submit"
								href="gestionDesPointsdeVente.xhtml?idBlocToShow=1"
								class="fa fa-info btn btn-default pull-right"> Annuler</a>
						</div>

					</div>


				</div>
			</h:form>
		</div>



	</ui:define>

</ui:composition>
