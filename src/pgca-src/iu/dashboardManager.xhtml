<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" template="template.pgca.xhtml">

	<ui:define name="title">PGCA - Plateforme de gestion Agricole</ui:define>


	<ui:define name="section">
		<!-- 			<div id="container222" style="min-width: 310px; height: 400px; margin: 0 auto"></div> -->



		<h:panelGroup rendered="#{connexionMB.connectedUserProfilIManager}">


			<div class="container-fluid fullbg">




	<p class="titrePage" style="font-size: 20px">Intrants
							disponibles auprès des fournisseurs</p>




						<hr />

						<p:dataTable  id="ProfilID" var="intrantDTO" widgetVar="intranttab" 
							value="#{referentielMB.getlistIntrantDTOFromFournisseurfORmANAGER()}" reflow="true"
							rowKey="#{intrantDTO.idProduit}"
							emptyMessage="Ancun intrant disponible" paginator="true"
							rows="5" cellSeparator="10"
							paginatorTemplate="{PreviousPageLink} {NextPageLink} "
							paginatorPosition="bottom"
							selection="#{managerManagedBean.selectedIntrantDTO}"
							selectionMode="single"
							filteredValue="#{referentielMB.listIntrantFiltred}"
							style="width: 90%; margin-left:5%; font-size:15px ; ">


							<!-- 							<p:column headerText="Categorie"> -->
							<!-- 				          #{profilMB.StringCutter(intrantDTO.typeProduit, 40)}  -->
							<!-- 				        </p:column> -->

							<f:facet name="header">
								<p:outputPanel>
									<h:outputText value="Critères de recherche "
										style="color : #002839" />
									<i class="fa fa-search" aria-hidden="true"
										style="color: #80c347" />

									<p:inputText id="globalFilter"
										onkeyup="PF('intranttab').filter()"
										style="width:350px; margin-bottom  : 40px; margin-left : 20px; "
										placeholder="Entrez un critère " />
								</p:outputPanel>
							</f:facet>


							<p:column headerText="Programme"
								filterBy="#{intrantDTO.libelleProgramme}"
								sortBy="#{intrantDTO.libelleProgramme}" filterMatchMode="exact">
				          #{profilMB.StringCutter(intrantDTO.libelleProgramme, 60)} 
				        </p:column>

							<p:column headerText="Point de stock"
								filterBy="#{intrantDTO.libellePointdeStock}"
								sortBy="#{intrantDTO.libellePointdeStock}"
								filterMatchMode="exact">
				          #{profilMB.StringCutter(intrantDTO.libellePointdeStock, 40)}
				        </p:column>


							<p:column headerText="Intrant"  filterBy="#{intrantDTO.libelleProduit}"
								sortBy="#{intrantDTO.libelleProduit}"
								filterMatchMode="exact" >
				          #{profilMB.StringCutter(intrantDTO.libelleProduit, 40)} 
				        </p:column>



							<p:column headerText="Tonnage disponible" 
								sortBy="#{intrantDTO.quantite}"
								>
				          #{profilMB.StringCutter(intrantDTO.quantite, 40)}
				        </p:column>
						
						
<!-- 						<p:ajax event="rowSelect" -->
<!-- 											listener="#{managerManagedBean.getDetailsIntrant}" -->
<!-- 											update="@form" /> -->

						</p:dataTable>


<br/> <br/> <br/>



				<div class="col-md-12"
					style="border: 0; width: 94%; margin-left: 2%">
					
					
					
						<div class="row">
							
							<div class="col-xs-6 col-sm-3">
								<div id="ui-widget" style="width : 420px ; background: white;">
									<h1 class="ui-value">
										<a href="managerGestionBanque.xhtml" style="color: #80c347;     font-size: 40px;">
											<i class="fa fa-caret-up" aria-hidden="true" style="color : red"></i>
								#{referentielMB.utils.formatFloatToCFA( tresoMB.callServiceTotalDepotBanque() )} 
												
												
										</a>
									</h1>
									<span class="ui-label"> <a href="managerGestionBanque.xhtml" style="color: #082839;     font-size: 35px;"> Banque </a> </span>
								</div>
							</div>
							
							
							
							<div class="col-xs-6 col-sm-3">
									<div id="ui-widget" style="width : 420px ; background: white;">
								<h1 class="ui-value"> <a href="ManagerGestionCredits.xhtml" style="color: #80c347;     font-size: 40px;">
								<i class="fa fa-caret-up" aria-hidden="true" style="color : red"></i>
								#{referentielMB.utils.formatFloatToCFA( tresoMB.callServiceTotalCredit() )} 
									
								 </a></h1>
								<span class="ui-label" style="color: #80c347;"> <a href="ManagerGestionCredits.xhtml" style="color: #082839;     font-size: 35px;"> credits </a></span>
							</div>
								
							</div>
							
							
							<div class="col-xs-6 col-sm-3">
									<div id="ui-widget" style="width : 420px ; background: white;">
								<h1 class="ui-value"> <a href="ManagerGestionVentes.xhtml" style="color: #80c347;     font-size: 40px;">
								<i class="fa fa-caret-up" aria-hidden="true" style="color : red"></i>
								#{referentielMB.utils.formatFloatToCFA( tresoMB.callServiceTotalVente() )} 
									
								 </a></h1>
								<span class="ui-label" style="color: #80c347;"> <a href="ManagerGestionVentes.xhtml" style="color: #082839;     font-size: 35px;"> CAISSE </a></span>
							</div>
								
							</div>
							

							<div class="col-xs-6 col-sm-3">
								<div id="ui-widget" style="width : 420px; background: white;">
									<h1 class="ui-value">
										<a href="managerGestionSubventions.xhtml?idBlocToShow=2" style="color: #80c347;     font-size: 40px;">
											<i class="fa fa-caret-up" aria-hidden="true" style="color : red"></i>
													#{referentielMB.utils.formatFloatToCFA( tresoMB.loadAllSubventions() )}  
										</a>
									</h1>
									<span class="ui-label"> <a href="managerGestionSubventions.xhtml?idBlocToShow=2" style="color: #082839;      font-size: 35px;"> Subvention </a> </span>
								</div>
							</div>

							

						</div> <br/><br/> <br/>


					<div class="col-md-5 dashboardIndicateursInverse">



						<span class="col-md-3" style="margin-right: 5%; color: #002839">
							<a href="managerGestionMiseEnplace.xhtml"
							title="#{managerManagedBean.nbMiseEnplaceEnCours}  mise (s) en place en cours "
							style="text-decoration: none"> <i
								class="fa fa-balance-scale" aria-hidden="true"
								style="margin-right: 5px; color: #80c347" /> Mise en place : <span
								style="font-size: 30px;">
									#{managerManagedBean.nbMiseEnplaceEnCours} </span>
						</a>
						</span> <span class="col-md-3" style="margin-right: 0%; color: #002839">
							<a href="managerServices.xhtml?idBlocToShow=2"
							title="#{managerManagedBean.callServiceRecuperationANBAllocation()}  collecte (s) en cours"
							style="text-decoration: none"> <i class="fa fa-retweet"
								aria-hidden="true" style="margin-right: 5px; color: #80c347" />
								Collecte : <span style="font-size: 30px;">
									#{managerManagedBean.callServiceRecuperationANBAllocation()} </span>
						</a>
						</span> <span class="col-md-3" style="margin-left: 10%; color: #002839">
							<a href="managerGestionCheques.xhtml"
							style="text-decoration: none"
							title="#{tresoMB.callServiceRecuperationALlNBCheques()}  chéque' (s) à encaisser">
								<i class="fa fa-check-circle" aria-hidden="true"
								style="margin-right: 5px; color: #80c347" /> Chéques : <span
								style="font-size: 30px;">
									#{tresoMB.callServiceRecuperationALlNBCheques()}</span>
						</a>
						</span>





					</div>

					<div class="col-md-2 " style="text-align: center"> <br/> <br/>

						<div class="col-xs-6 col-sm-3 hide">
							<div id="ui-widget" style="width: 420px">
								<h1 class="ui-value">
									<a href="managerGestionSubventions.xhtml?idBlocToShow=2"
										style="color: #80c347; font-size: 40px;"> <i
										class="fa fa-caret-up" aria-hidden="true" style="color: red"></i>
										#{referentielMB.utils.formatFloatToCFA(
										tresoMB.loadAllSubventions() )}

									</a>
								</h1>
								<span class="ui-label"> <a
									href="managerGestionSubventions.xhtml?idBlocToShow=2"
									style="color: #80c347;"> Subvention </a>
								</span> 
							</div>
						</div>
						
						
						


						<hr /> 


					</div>

					<div class="col-md-5 dashboardIndicateursInverse">


						<span class="col-md-3" style="margin-right: 5%; color: #002839">
							<a href="managerGestionOL.xhtml?idBlocToShow=1"
							style="text-decoration: none"
							title="#{managerManagedBean.loadOrdresEnAttentDeValidation()}  OL en attente de validation">
								<i class="fa fa-adjust" aria-hidden="true"
								style="margin-right: 5px; color: #80c347" /> OL en attentes : <span
								style="font-size: 30px;">
									#{agentSaisieMB.indicateurs.olEnAttentes} </span>
						</a>
						</span> <span class="col-md-3" style="margin-right: 5%; color: #002839">
							<i class="fa fa-check-circle" aria-hidden="true"
							style="margin-right: 5px; color: #80c347" /> Litiges : <span
							style="font-size: 30px;">
								#{agentSaisieMB.indicateurs.olAcceptes}</span>
						</span> <span class="col-md-3" style="margin-right: 5%; color: #002839">
							<i class="fa fa-check-square-o" aria-hidden="true"
							style="margin-right: 5px; color: #80c347" /> Versement : <span
							style="font-size: 30px;">
								#{agentSaisieMB.indicateurs.olTraites}</span>
						</span>

					</div>




				</div>

				<div class="col-md-10" style="display: none">
					<div class="col-md-3 col-sm-6 col-xs-12">


						<div class="info-box bg-aqua">
							<span class="info-box-icon"><i class="fa fa-bookmark-o"></i></span>

							<div class="info-box-content">
								<span class="info-box-text ">Commandes</span> <span
									class="col-md-12"> <span class="pull-left"><i
										class="fa fa-clock-o iconDashboard" aria-hidden="true"
										style="margin-right: 10PX"></i>En attente</span> <span
									class="pull-right">2</span>

								</span> <span class="col-md-12"> <span class="pull-left"><i
										class="fa fa-check iconDashboard" aria-hidden="true"
										style="margin-left: -2PX"></i>Traitées</span> <span
									class="pull-right">8</span>

								</span> <span class="col-md-12"> <span class="pull-left"><i
										class="fa fa-close iconDashboard" aria-hidden="true"
										style="margin-right: 10PX"></i>Refusés</span> <span
									class="pull-right">1</span>

								</span>

								<div class="progress">
									<div class="progress-bar" style="width: 70%"></div>
								</div>

							</div>
							<!-- /.info-box-content -->
						</div>
						<!-- /.info-box -->
					</div>
					<!-- /.col -->
					<div class="col-md-3 col-sm-6 col-xs-12">
						<div class="info-box ">
							<span class="info-box-icon"><i class="fa fa-university"></i></span>

							<div class="info-box-content">
								<span class="info-box-text">Banque</span> <span
									class="info-box-number" style="color: #b55757">
									#{referentielMB.utils.formatFloatToCFA(
									tresoMB.callServiceTotalDepotBanque() )} </span>

								<div class="progress">
									<div class="progress-bar" style="width: 70%"></div>
								</div>
								<span class="progress-description"> 32 versements </span>
							</div>
							<!-- /.info-box-content -->
						</div>
						<!-- /.info-box -->
					</div>



					<!-- /.col -->
					<div class="col-md-3 col-sm-6 col-xs-12">
						<div class="info-box bg-#b55757">
							<span class="info-box-icon"><i class="fa fa-comments-o"></i></span>

							<div class="info-box-content">
								<span class="info-box-text">Subventions</span> <span
									class="info-box-number" style="color: #b55757">
									#{referentielMB.utils.formatFloatToCFA(managerManagedBean.totalSubvention)}</span>

								<div class="progress">
									<div class="progress-bar" style="width: 70%"></div>
								</div>
								<span class="progress-description"> 2 ventes </span>
							</div>
							<!-- /.info-box-content -->
						</div>
						<!-- /.info-box -->
					</div>
					<!-- /.col -->



					<!-- /.col -->
					<div class="col-md-3 col-sm-6 col-xs-12">
						<div class="info-box bg-yellow">
							<span class="info-box-icon"><i class="fa fa-calendar"></i></span>

							<div class="info-box-content">
								<span class="info-box-text ">Ordre de livraions</span> <span
									class="col-md-12"> <span class="pull-left"><i
										class="fa fa-clock-o iconDashboard" aria-hidden="true"
										style="margin-right: 10PX"></i>En attente</span> <span
									class="pull-right">22</span>

								</span> <span class="col-md-12"> <span class="pull-left"><i
										class="fa fa-check iconDashboard" aria-hidden="true"
										style="margin-left: -2PX"></i>Traitées</span> <span
									class="pull-right">9</span>

								</span> <span class="col-md-12"> <span class="pull-left"><i
										class="fa fa-close iconDashboard" aria-hidden="true"
										style="margin-right: 10PX"></i>Refusés</span> <span
									class="pull-right">12</span>

								</span>

								<div class="progress">
									<div class="progress-bar" style="width: 70%"></div>
								</div>
							</div>
							<!-- /.info-box-content -->
						</div>
						<!-- /.info-box -->
					</div>

				</div>










				<div class="col-md-12">
					<h:form id="cc">
						<br />
						<br />
						<br />
						<br />


						<p:messages id="messages" showDetail="false"
							style="width : 60% ; margin-left : 20%" />

						<h:panelGroup id="Suivi">
							<div id="myCarousel" class="carousel slide" data-ride="carousel">
								<!-- Indicators -->
								<ol class="">
									<ui:repeat var="slider"
										value="#{managerManagedBean.loadAllMiseEnplace()}">
										<li data-target="#myCarousel"
											data-slide-to="#{slider.idMiseEnPlace}" class="active"></li>
									</ui:repeat>
								</ol>

								<!-- Wrapper for slides -->
								<div class="carousel-inner">



									<ui:repeat var="mepSlider"
										value="#{managerManagedBean.loadAllMiseEnplace()}">
										<div class="item #{mepSlider.activeCss}"
											id="#{mepSlider.idMiseEnPlace}">

											<div class="carousel-caption">
												<h3 style="color: black"></h3>
												<!--         <img src="assets/images/#{mepSlider.statusIcon}.png"   /> -->

												<img src="assets/images/sliderOK.png" />

												<!--                         <img src="assets/images/slideWarn.png"   /> -->

												<p style="color: black">0 litige</p>
												<!--         <p style="color : black">#{mepSlider.statusText}</p> -->
											</div>

												<div class="row">


													<div class="row fullbg">

														<div class="col-lg-2" />
														<br />
														<br />
														<div class="col-md-3 fixed"
															style="background: url('assets/images/pictosIntrant/#{mepSlider.pictoImages}.png'); height: 300px; background-size: cover; background-size: 100% 100%;">

														</div>
														<div class="col-lg-7">

															<div style="width: 100%;">
																<h3 class="ui-label sliderInfosMEP"
																	style="text-align: center; font-size: 30px; coloor: #46692a">
																	<i class="fa fa-info-circle"></i> Mise en place de
																	#{mepSlider.libelleIntrantAMettreEnplace} au Point de
																	vente de #{mepSlider.nomPointDeVente}
																</h3>
																<br />


															</div>
															<br />


															<div class="col-lg-12">
																<div class="col-lg-7">
																	<div class="form-group ">
																		<span class="titrePage" style="font-size: 20px">Rapport
																		</span>
																	</div>
																	<hr />

																	<div class="form-group row">
																		<label class="col-xs-4 col-form-label"><i
																			style="color: #d6ce35" class="fa fa-check"
																			aria-hidden="true"></i> Quota </label>
																		<div class="col-xs-8">
																			<h:outputLabel styleClass="sliderInfosMEP"
																				value="#{mepSlider.quotaIntrantAMettreEnplace} (T)"></h:outputLabel>
																		</div>
																	</div>

																	<br />
																	<div class="form-group row">
																		<label class="col-xs-4 col-form-label"> <i
																			class="fa fa fa-check" style="color: #d6ce35"
																			aria-hidden="true"></i> Reliquat
																		</label>
																		<div class="col-xs-8">
																			<h:outputLabel styleClass="sliderInfosMEP"
																				value="#{mepSlider.reliquatIntrantAMettreEnplace} (T)"></h:outputLabel>
																		</div>
																	</div>

																	<br />

																	<div class="form-group row">
																		<label class="col-xs-4 col-form-label"> <i
																			class="fa fa fa-check" style="color: #d6ce35"
																			aria-hidden="true"></i> Mise en place
																		</label>
																		<div class="col-xs-8">
																			<h:outputLabel styleClass="sliderInfosMEP"
																				value="#{mepSlider.quotaIntrantAMettreEnplace - mepSlider.reliquatIntrantAMettreEnplace} (T)"></h:outputLabel>
																		</div>
																	</div>
																</div>

																<div class="col-lg-5">
																	<div class="form-group ">
																		<span class="titrePage">Stock disponible </span>
																	</div>
																	<hr />

																	<div class="form-group row">
																		<label class="col-xs-4 col-form-label">
																			Fournisseur </label>
																		<div class="col-xs-8 hide">
																			<h:outputLabel styleClass="sliderInfosMEP"
																				value="#{mepSlider.stockFournisseurIntrnantEncours}" />
																		</div>
																	</div>
																	<div class="form-group row ">
																		<label class="col-xs-4 col-form-label"> 
																		</label>
																		<div class="col-xs-8">
																			<h:outputLabel styleClass="sliderInfosMEP"
																				value="#{mepSlider.stockFournisseurIntrnantEncours}" />
																		</div>
																	</div>

																	<hr />
																	<div class="form-group row hide">
																		<label class="col-xs-4 col-form-label sliderInfosMEP">TOTAL 
																		</label>
																		<div class="col-xs-8">
																			<i class="fa fa-long-arrow-down" aria-hidden="true"
																				style="color: red; margin-right: 5px"></i>
<!-- 																			<h:outputLabel styleClass="sliderInfosMEP" -->
<!-- 																				value="#{mepSlider.stockFournisseurIntrnantEncours + mepSlider.stockFournisseurIntrnantEncours}" /> -->
																		</div>



																	</div>



																</div>

																<div class="row hide">
																	<div class="col-lg-4" />
																	<div class="col-lg-4">
																		<div
																			style="height: 70px; padding: 10px 10px 30px 10px; font-size: 25px; box-shadow: inset 0 3px 0 rgb(34, 160, 88), inset 0 3px 5px rgba(0, 0, 0, .25)">

																			<span class="ui-label"> <i
																				class="fa fa-ravelry" aria-hidden="true"></i>
																			</span>

																			<h1 class="ui-value">
																				<a href="#" style="color: #029441; margin-top: 10px ; font-size : 35PX"
																					class="pull-right"> #{mepSlider.stockFournisseurIntrnantEncours + mepSlider.stockFournisseurIntrnantEncours} Tonne(s)</a>
																			</h1>

																		</div>
																	</div>





																</div>

															</div>
														</div>
													</div>
												</div>

										</div>
									</ui:repeat>




								</div>



								<!-- Left and right controls -->
								<a class="left carousel-control" href="#myCarousel"
									data-slide="prev"> <span
									class="glyphicon glyphicon-chevron-left"></span> <span
									class="sr-only">Précédent</span>
								</a> <a class="right carousel-control" href="#myCarousel"
									data-slide="next"> <span
									class="glyphicon glyphicon-chevron-right"></span> <span
									class="sr-only">Suivant</span>
								</a>
							</div>


							<br />


							<!--  Liste des points des ventes trouvés dans la commune -->


						</h:panelGroup>




					</h:form>
				</div>




				<!--  MAP DESSACTIVE PENDANT LA PHASE DE FORMATION/MEP des SUPERVISEURS -->

				<div class="col-md-4 hide">

					<p style="text-align: center">Répartition activités par Zone</p>
					<div id="mapdiv"
						style="width: 100%; background-color: transparent; height: 500px;" />

				</div>

			</div>




		</h:panelGroup>

		<h:panelGroup
			rendered="#{connexionMB.connectedUserProfilIManager == false}">
			<div class="container-fluid">
				<div class="col-md-12">


					<br />
					<p class="titrePage">Accès restreint</p>
					<h1>Votre profil ne vous donne pas accès à cette ressource
						demandée</h1>

					<img src="assets/images/restrict.png" alt="Logo du Sénégal" />


				</div>
			</div>
		</h:panelGroup>


		<div class="row" />





	</ui:define>

</ui:composition>
